//--------------------------------------------------------------------------------------------------------------
// MainPrograma.ino
// Programa que controla el sparkfunk
// Equipo 4
// Carlos Tortosa
// 14-10-2019
// CopyRight
//--------------------------------------------------------------------------------------------------------------
// Includes
//--------------------------------------------------------------------------------------------------------------
#include "SensorO3.h";

#include "EmisoraBTLE.h";

// Se crea un objeto SensorO3
SensorO3 miSensor(15, 17);
// Se crea una emisoraBle
EmisoraBTLE miEmisora;

//--------------------------------------------------------------------------------------------------------------
void setup() {
  Serial1.begin(9600);
  while (!Serial1) {};
  miEmisora.startAdvertising();

} // setup()
//--------------------------------------------------------------------------------------------------------------


//--------------------------------------------------------------------------------------------------------------
void loop() {

  medirYPublicar();
  delay(5000);

} // loop()
//--------------------------------------------------------------------------------------------------------------


//--------------------------------------------------------------------------------------------------------------
// 
// [void] -> medirYPublicar() --> [void]
//  
//--------------------------------------------------------------------------------------------------------------
void medirYPublicar() {

  int medidaO3 = miSensor.medirO3();
  int temperatura = miSensor.medirTemperatura();
  int humedad = miSensor.medirHumedad();
  
  miEmisora.anunciarO3(medidaO3,temperatura, humedad);
  
} // medirYPublicar()

//--------------------------------------------------------------------------------------------------------------
